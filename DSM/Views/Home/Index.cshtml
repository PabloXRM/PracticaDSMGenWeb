@{
    ViewData["Title"] = "Novedades";
}
@model DSM.Models.HomeIndexViewModel
@using PracticaDSMGen.ApplicationCore.Enumerated.PracticaDSM

<div class="product-search-wrap" style="margin-bottom:16px;">
    <form class="product-search-form" method="get" asp-controller="Home" asp-action="Resultados">
        <input class="form-input product-search-input"
               name="q"
               value="@Model.Q"
               placeholder="Buscar por nombre, artista, descripción..." />

        <select class="form-select product-search-select" name="estilo">
            <option value="">Todos los estilos</option>
            @foreach (EstiloEnum e in Enum.GetValues(typeof(EstiloEnum)))
            {
                <option value="@((int)e)" selected="@(Model.Estilo.HasValue && (int)Model.Estilo.Value == (int)e)">
                    @e
                </option>
            }
        </select>

        <select class="form-select product-search-select" name="formato">
            <option value="">Todos los formatos</option>
            @foreach (FormatoEnum f in Enum.GetValues(typeof(FormatoEnum)))
            {
                <option value="@((int)f)" selected="@(Model.Formato.HasValue && (int)Model.Formato.Value == (int)f)">
                    @f
                </option>
            }
        </select>

        <button class="btn primary-btn" type="submit">Buscar</button>
        <a class="btn search-clear" asp-controller="Home" asp-action="Index">Limpiar</a>
    </form>
</div>

<section class="hero">
    <div class="hero-static">
        <img src="~/img/v.jpg" alt="Promoción destacada" />
    </div>
    <div class="hero-dots">
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
    </div>
</section>
<br>
<br>
<hr>

@if (Model.ProductosRecomendados != null && Model.ProductosRecomendados.Count > 0)
{
    <section class="section section-recommendation">
        <div class="section-header">
            <h2>✨ Recomendaciones especiales</h2>
        </div>

        <div class="cards-row-recommendations">
            @foreach (var producto in Model.ProductosRecomendados)
            {
                <article class="disc-card featured">
                    @{
                        string imagenPath = Url.Content("~/img/cd1.png");
                        if (!string.IsNullOrEmpty(producto.Fotos))
                        {
                            if (!producto.Fotos.StartsWith("http") && !producto.Fotos.StartsWith("/"))
                            {
                                imagenPath = Url.Content("~/img/" + producto.Fotos);
                            }
                            else
                            {
                                imagenPath = producto.Fotos;
                            }
                        }
                    }
                    <img src="@imagenPath" alt="@producto.Descripcion" />
                    <div class="card-info">
                        <h3>@producto.Descripcion</h3>
                        <p class="artist">@producto.Artista</p>
                        <p class="price">@producto.Precio.ToString("C")</p>
                        <div class="card-actions">
                            <a class="btn primary-btn" asp-controller="Tienda" asp-action="Producto" asp-route-id="@producto.Id">Ver detalles</a>
                            <a class="btn secondary-btn" asp-controller="Carrito" asp-action="AñadirAlCarrito" asp-route-id="@producto.Id">Añadir al carrito</a>
                        </div>
                    </div>
                </article>
            }
        </div>

        <div class="section-cta">
            <p style="text-align:center; color:#666;">Descubre los mejores álbumes de nuestro catálogo</p>
        </div>
    </section>
    <hr>
}

<section class="section section-reserve">
    <div class="section-header">
        <h2>Reserva el último disco de Xxxxx</h2>
    </div>

    <div class="cards-row">
        <article class="disc-card">
            <img src="~/img/cd1.png" alt="Disco 1" />
        </article>
        <article class="disc-card">
            <img src="~/img/cd1.png" alt="Disco 2" />
        </article>
        <article class="disc-card">
            <img src="~/img/cd1.png" alt="Disco 3" />
        </article>
        <article class="disc-card">
            <img src="~/img/cd1.png" alt="Disco 4" />
        </article>
    </div>

    <div class="section-cta">
        <a class="btn primary-btn" asp-controller="Tienda" asp-action="Catalogo">Descubre más</a>
    </div>
</section>

<section class="section section-offers">
    <div class="section-header section-header-row">
        <h2>Ofertas</h2>
        <a class="btn ghost-btn" asp-controller="Tienda" asp-action="Catalogo">Ver todo</a>
    </div>

    <div class="cards-row small">
        <article class="disc-card">
            <img src="~/img/cd6.png" alt="Oferta 1" />
        </article>
        <article class="disc-card">
            <img src="~/img/cd6.png" alt="Oferta 2" />
        </article>
        <article class="disc-card">
            <img src="~/img/cd6.png" alt="Oferta 3" />
        </article>
    </div>
</section>

<section class="section section-novedades">
    <div class="section-inner">
        <div class="section-header section-header-row">
            <h2>Novedades</h2>
            <a class="btn ghost-btn" asp-controller="Tienda" asp-action="Catalogo">Ver todo</a>
        </div>

        <div class="cards-row">
            <article class="disc-card">
                <img src="~/img/cd8.png" alt="Novedad 1" />
            </article>
            <article class="disc-card">
                <img src="~/img/cd9.png" alt="Novedad 2" />
            </article>
            <article class="disc-card">
                <img src="~/img/cd10.png" alt="Novedad 3" />
            </article>
            <article class="disc-card">
                <img src="~/img/cd11.png" alt="Novedad 4" />
            </article>
        </div>
    </div>
</section>
